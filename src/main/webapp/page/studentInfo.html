<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title></title>
<link rel="stylesheet" href="../style/weui.css" />
<script type="text/javascript" src="../style/common.js"></script>
</head>
<body>
	<div class="page">
    <div class="page__hd">
        <h1 class="page__title">个人详细信息</h1>
        <p class="page__desc"><!-- 表单预览 --></p>
    </div>
    <div class="page__bd">
    	<div id="formHead" class="weui-cells__title" style="color: red"></div>
        <div id="preview" class="weui-form-preview">
            <div class="weui-form-preview__hd">
                <div class="weui-form-preview__item">
                	<img id="previewImage" alt="" src="" width="100%">
                    <!-- <label class="weui-form-preview__label">图像</label>
                    <em class="weui-form-preview__value"> </em> -->
                </div>
            </div>
            <div id="previewBd" class="weui-form-preview__bd">
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">姓名</label>
                    <span id="previewName" class="weui-form-preview__value">电动打蛋机</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">身份证号</label>
                    <span id="previewIdCard" class="weui-form-preview__value">电动打蛋机</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">性别</label>
                    <span id="previewSex" class="weui-form-preview__value">名字名字名字</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">出生日期</label>
                    <span id="previewBirthday" class="weui-form-preview__value">名字名字名字</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">现在所在城市</label>
                    <span id="previewCity" class="weui-form-preview__value">很长很长的名字很长很长的名字很长很长的名字很长很长的名字很长很长的名字</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">工作单位</label>
                    <span id="previewCompany" class="weui-form-preview__value">很长很长的名字很长很长的名字很长很长的名字很长很长的名字很长很长的名字</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">职务/头衔</label>
                    <span id="previewJobTitle" class="weui-form-preview__value">很长很长的名字很长很长的名字很长很长的名字很长很长的名字很长很长的名字</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">手机号</label>
                    <span id="previewMobilephone" class="weui-form-preview__value">很长很长的名字很长很长的名字很长很长的名字很长很长的名字很长很长的名字</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">邮箱</label>
                    <span id="previewEmail" class="weui-form-preview__value">很长很长的名字很长很长的名字很长很长的名字很长很长的名字很长很长的名字</span>
                </div>
			</div>
            <div id="previewFt" class="weui-form-preview__ft">
                <!-- <a class="weui-form-preview__btn weui-form-preview__btn_primary" href="javascript:">操作</a> -->
                
            </div>
        </div>
        <div id="formRemark" class="weui-cells__tips">如发现信息有误请联系我们微信公众号，我们将第一时间处理！</div>
    </div>
    <div id="pageFt" class="page__ft">
			<a href="javascript:myHome()"><img width="168"
				src="../images/icon_footer_link.png" /></a>
		</div>
</div>

		<div id="divPreviewSchoolType" style="display: none;" class="weui-form-preview__item">
			<label class="weui-form-preview__label">毕业学校类型</label> <span id="previewSchoolType"
				class="weui-form-preview__value">test1</span>
		</div>
		<div id="divPreviewSchoolName" style="display: none;" class="weui-form-preview__item">
			<label class="weui-form-preview__label">毕业学校名称</label> <span id="previewSchoolName"
				class="weui-form-preview__value">test2</span>
		</div>
		<div id="divPreviewYear" style="display: none;"class="weui-form-preview__item">
			<label class="weui-form-preview__label">毕业届数</label> <span id="previewYear"
				class="weui-form-preview__value">test3</span>
		</div>


</body>

<script type="text/javascript">
	

var pageBd = document.getElementById("pageBd");
var formRemark = document.getElementById("formRemark");
var pageFt = document.getElementById("pageFt");
var formHead = document.getElementById("formHead");
	var preview = document.getElementById("preview");
	var previewBd = document.getElementById("previewBd");
	
	
	var previewImage = document.getElementById("previewImage");
	var previewName = document.getElementById("previewName");
	var previewIdCard = document.getElementById("previewIdCard");
	var previewSex = document.getElementById("previewSex");
	var previewBirthday = document.getElementById("previewBirthday");

	var previewCity = document.getElementById("previewCity");
	var previewCompany = document.getElementById("previewCompany");
	var previewJobTitle = document.getElementById("previewJobTitle");

	var previewMobilephone = document.getElementById("previewMobilephone");
	var previewEmail = document.getElementById("previewEmail");

	var divPreviewSchoolType = document.getElementById("divPreviewSchoolType");
	var divPreviewSchoolName = document.getElementById("divPreviewSchoolName");
	var divPreviewYear = document.getElementById("divPreviewYear");
	
	var previewSchoolName = document.getElementById("previewSchoolName");
	var previewSchoolType = document.getElementById("previewSchoolType");
	var previewYear = document.getElementById("previewYear");

	var urlGetStudent = "../student/getStudentInfo.do";
	
	window.onload = function() {

		schoolCode = request.QueryString("schoolCode");
		schoolWX = request.QueryString("schoolWX");
		schoolLogoUrl = request.QueryString("schoolLogoUrl");
		
		var studentCode = request.QueryString("studentCode");
		
		document.title = schoolWX;
		pageFt.getElementsByTagName("a")[0].href = "javascript:myHome(\""
				+ schoolCode + "\")";
		pageFt.getElementsByTagName("img")[0].src = schoolLogoUrl;
		
		formRemark.innerText = "若对发现该认领的信息有误，请在我们微信公众号“"+schoolWX+"”"+"留言【届数+姓名】，我们确认后将更新数据";

	ajaxGet(
				urlGetStudent + "?studentCode=" + studentCode,
				function(stringData) {

					console.info(stringData);
					var data = JSON.parse(stringData);

					console.info(data);
					if (data.status == 0) {
						data = data.data;						
						previewImage.src = data.headUrl;
						previewName.innerText = data.name;
						previewIdCard.innerText = data.idCard;
						previewBirthday.innerText = data.birthday;
						previewSex.innerText = data.sex=="0"?"女":"男";

						previewCity.innerText = data.city;
						previewCompany.innerText = data.company;
						previewJobTitle.innerText = data.jobTitle;

						previewMobilephone.innerText = data.mobilephone;
						previewEmail.innerText = data.email;

						if (data.yearSchool) {
							for (var i = 0; i < data.yearSchool.length; i++) {
								
								var dataOne = data.yearSchool[i];
								
								var newDivPreviewSchoolType = divPreviewSchoolType.cloneNode(true);
								newDivPreviewSchoolType.style.display="block";
								var newDivPreviewSchoolName = divPreviewSchoolName.cloneNode(true);
								newDivPreviewSchoolName.style.display="block";
								var newDivPreviewYear = divPreviewYear.cloneNode(true);
								newDivPreviewYear.style.display="block";
								
								newDivPreviewSchoolType.getElementsByTagName("span")[0].innerText = dataOne.schoolTypeName;
								newDivPreviewSchoolName.getElementsByTagName("span")[0].innerText = dataOne.schoolName;
								newDivPreviewYear.getElementsByTagName("span")[0].innerText = dataOne.year;
								
								previewBd.appendChild(newDivPreviewSchoolType);
								previewBd.appendChild(newDivPreviewSchoolName);
								previewBd.appendChild(newDivPreviewYear);

							}
						} 
					} else if (data.message && "" != data.message) {
						formHead.innerText = data.message;
					}

				});
	}
</script>

</html>